<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<title>LuaFileSystem</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>

<body>

<div id="container">

<div id="product">
	<div id="product_logo"><a href="http://www.keplerproject.org">
		<img alt="LuaFileSystem" src="luafilesystem.png"/>
	</a></div>
	<div id="product_name"><big><b>LuaFileSystem</b></big></div>
	<div id="product_description">File System Library for the Lua Programming Language</div>
</div> <!-- id="product" -->

<div id="main">
	
<div id="navigation">
<h1>LuaFileSystem</h1>
	<ul>
		<li><a href="index.html">Home</a>
			<ul>
				<li><a href="index.html#overview">Overview</a></li>
				<li><a href="index.html#status">Status</a></li>
				<li><a href="index.html#download">Download</a></li>
				<li><a href="index.html#history">History</a></li>
				<li><a href="index.html#credits">Credits</a></li>
				<li><a href="index.html#contact">Contact us</a></li>
			</ul>
		</li>
		<li><strong>Manual</strong>
			<ul>
				<li><a href="manual.html#introduction">Introduction</a></li>
				<li><a href="manual.html#installation">Installation</a></li>
				<li><a href="manual.html#reference">Reference</a></li>
			</ul>
		</li>
		<li><a href="examples.html">Examples</a></li>
		<li><a href="license.html">License</a></li>
	</ul>
</div> <!-- id="navigation" -->

<div id="content">

<h2><a name="introduction"></a>Introduction</h2>

<p>LuaFileSystem is a <a href="http://www.lua.org">Lua</a> library
developed to complement the set of functions related to file
systems offered by the standard Lua distribution.</p>

<p>LuaFileSystem is free software and uses the same <a href=
"license.html">license</a> as Lua 5.0.</p>

<h2><a name="installation"></a>Installation</h2>

<p>
LuaFileSystem is distributed as a pair of C source and header
files. The distribution provides a <tt>Makefile</tt> prepared to
compile the library and install it. The file <tt>config</tt> should
be edited to suit the needs of the aimed platform.
</p>

<p>
LuaFileSystem follows the
<a href="http://www.keplerproject.org/compat">package proposal</a>
for Lua 5.1, therefore this package should be "installed".
In other words,
if you are using Lua 5.0, the files <tt>compat-5.1.c</tt> and
<tt>compat-5.1.h</tt> must be used in the compilation and the file
<tt>compat-5.1.lua</tt> must be installed in the <tt>LUA_PATH</tt>.
If you are using Lua 5.1, nothing should be done.</p>

<h2><a name="reference"></a>Reference</h2>

<p>LuaFileSystem offers the following functions:</p>

<ul>
<a name="attributes"></a>
<li><b><tt>lfs.attributes (filepath)</tt></b><br>
 Obtains the file attributes. The attributes are: 

<div style="margin-left: 2em"><i>dev</i>, device inode resides
on;<br>
 <i>ino</i>, inode's number;<br>
 <i>mode</i>, inode protection mode (<small>values could be
<tt>file</tt>, <tt>directory</tt>, <tt>link</tt>, <tt>socket</tt>,
<tt>named pipe</tt>, <tt>char device</tt>, <tt>block device</tt> or
<tt>other</tt></small>);<br>
 <i>nlink</i>, number of hard links to the file;<br>
 <i>uid</i>, user-id of owner;<br>
 <i>gid</i>, group-id of owner;<br>
 <i>rdev</i>, device type, for special file inode;<br>
 <i>access</i>, time of last access;<br>
 <i>modification</i>, time of last data modification;<br>
 <i>change</i>, time of last file status change;<br>
 <i>size</i>, file size, in bytes;<br>
 <i>blocks</i>, block allocated for file; (Unix only)<br>
 <i>blksize</i>, optimal file system I/O blocksize; (Unix only)<br>
</div>

Returns a table with file attributes described above.
</li>

<a name="chdir"></a>
<li><b><tt>lfs.chdir (path)</tt></b><br>
 Changes the current working directory to the given
<tt>path</tt>.<br>
 Returns <tt>true</tt> in case of success or <tt>nil</tt> plus an
error string.
</li>

<a name="getcwd"></a>
<li><b><tt>lfs.currentdir ()</tt></b><br>
 Returns a string with the current working directory or
<code>nil</code> plus an error string.
</li>

<a name="dir"></a>
<li><b><tt>lfs.dir (path)</tt></b><br>
 Lua iterator over the entries of a given directory. Raises an
error if <tt>path</tt> is not a directory.
</li>

<a name="lock"></a>
<li><b><tt>lfs.lock (filehandle, mode[, start[, length]])</tt></b><br>
 Locks a file or a part of it. This function works on <em>open
files</em>; the file handle should be specified as the first
argument. The string <code>mode</code> could be either
<code>r</code> (for a read/shared lock) or <code>w</code> (for a
write/exclusive lock). The optional arguments <code>start</code>
and <code>length</code> can be used to specify a starting point and
its length; both should be numbers.<br>
 Returns a boolean indicating if the operation was successful; in
case of error, it returns <code>false</code> plus an error string.
</li>

<a name="mkdir"></a>
<li><b><tt>lfs.mkdir (dirname)</tt></b><br>
 Creates a new directory. The argument is the name of the new
directory.<br>
 Returns a boolean indicating whether the operation succeeds or not
(in this case, an error string is returned too).
</li>

<a name="touch"></a>
<li><b><tt>lfs.touch (filepath [, atime [, mtime]])</tt></b><br>
Set access and modification times of a file.
This function is a bind to <tt>utime</tt> function.
The first argument is the filename,
the second argument is the access time,
and the third argument is the modification time.
Both times are provided in seconds (which should be generated with
Lua standard function <tt>os.date</tt>).
If the modifition time is omitted, the access time provided is used;
if both times are omitted, the current time is used.<br>
Returns a boolean indicating whethet the operation succeeds or not
(followed by an error string in case it fails).
</li>

<a name="unlock"></a>
<li><b><tt>lfs.unlock (filehandle[, start[, length]])</tt></b><br>
 Unlocks a file or a part of it. This function works on <em>open
files</em>; the file handle should be specified as the first
argument. The optional arguments <code>start</code> and
<code>length</code> can be used to specify a starting point and its
length; both should be numbers.<br>
 Returns a boolean indicating if the operation was successful; in
case of error, it returns <code>false</code> plus a string
describing the error.</li>
</ul>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
	<p><small>
	$Id: manual.html,v 1.10 2005/05/04 02:28:51 tuler Exp $
	</small></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html>
